set title "TAP-like reactor"
%%%
%%% This deck implements a TAP-like reactor based on public information
%%%
%%% toggle cell core 0 fill CoreLattice1 -core_cyl for different core lattice


pin  F
mat_fuel

pin M
mat_moderator 1.15
mat_clad 1.25
mat_fuel

%assemblies

lat A1 1 0 0 7 7 3.0
F F F F F F F
F M M M M M F
F M M M M M F
F M M M M M F
F M M M M M F
F M M M M M F
F F F F F F F


%core 
lat CoreLattice1 1 0 0 20 20 15.0
F F  F  F  F  F  F  F  F  F  F  F  F  F  F  F  F  F  F  F 
F F  F  F  F  F  A1 A1 A1 A1 A1 A1 A1 A1 F  F  F  F  F  F
F F  F  F  F  A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 F  F  F  F  F
F F  F  A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 F  F  F
F F  F  A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 F  F  F
F F  A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 F  F
F A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 F
F A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 F
F A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 F
F A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 F
F A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 F
F A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 F
F A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 F
F A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 F
F F  A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 F  F
F F  F  A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 F  F  F
F F  F  A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 F  F  F
F F  F  F  F  A1 A1 A1 A1 A1 A1 A1 A1 A1 A1 F  F  F  F  F
F F  F  F  F  F  A1 A1 A1 A1 A1 A1 A1 A1 F  F  F  F  F  F
F F  F  F  F  F  F  F  F  F  F  F  F  F  F  F  F  F  F  F 


surf core_cyl cylz 0 0 150 -150 150 %radius 1.5m, length 3m
surf LP_cyl cylz 0 0 150 -175 -150 
surf UP_cyl cylz 0 0 150 150 175

cell core 0 fill CoreLattice1 -core_cyl
cell LP 0 mat_fuel -LP_cyl
cell UP 0 mat_fuel -UP_cyl

%here be dragons
cell rest 0 outside core_cyl LP_cyl UP_cyl


%MATERIALS

mat mat_fuel -5.01 tmp 901 %add burn and vol if needed
U-235.09c -3.11e-2
U-238.09c -5.909e-1
Li-7.09c  -4.8358e-2
Li-6.09c  -2.418e-6
F-19.09c  -3.2964e-1

mat mat_moderator -5.66 tmp 901 
Zr-90.09c  -4.9793e-1
Zr-91.09c  -1.0980e-1
Zr-92.09c  -1.6967e-1
Zr-94.09c  -1.7569e-1
Zr-96.09c  -2.8908e-2
H-1.09c    -1.8007e-2
H-2.09c    -4.1389e-6

%TODO: check whether ZrH has S(a,b)

mat mat_clad -3.21 tmp 901
C-12.09c  -2.9936e-1
Si-28.09c -6.4365e-1
Si-29.09c -3.3866e-2
Si-30.09c -2.3120e-2

%SETTINGS
set acelib "/home/elter/jeff31.xsdata"
set declib "/usr/local/SERPENT/endf-b-vi-8_decay.dat"
set nfylib "/usr/local/SERPENT/endf-b-vi-8_nfpy.dat"

set power 400000000 %400 MW TODO: check
set pop 10000 200 40


%PLOT
plot 31 1500 1500 10.0 -160 160 -160 160
plot 21 1000 1000 4.5 -160 160 -160 160

%TALLIES

det fluxspect dc core dv 21205750.411731105 de ccfe709  %here come filters if needed; V=150**2*np.pi*300, whole core region tallied. dv to get flux units

ene ccfe709 1
       0.0
       1.0000E-11
       1.0471E-11
       1.0965E-11
       1.1482E-11
       1.2023E-11
       1.2589E-11
       1.3183E-11
       1.3804E-11
       1.4454E-11
       1.5136E-11
       1.5849E-11
       1.6596E-11
       1.7378E-11
       1.8197E-11
       1.9055E-11
       1.9953E-11
       2.0893E-11
       2.1878E-11
       2.2909E-11
       2.3988E-11
       2.5119E-11
       2.6303E-11
       2.7542E-11
       2.8840E-11
       3.0200E-11
       3.1623E-11
       3.3113E-11
       3.4674E-11
       3.6308E-11
       3.8019E-11
       3.9811E-11
       4.1687E-11
       4.3652E-11
       4.5709E-11
       4.7863E-11
       5.0119E-11
       5.2481E-11
       5.4954E-11
       5.7544E-11
       6.0256E-11
       6.3096E-11
       6.6069E-11
       6.9183E-11
       7.2444E-11
       7.5858E-11
       7.9433E-11
       8.3176E-11
       8.7096E-11
       9.1201E-11
       9.5499E-11
       1.0000E-10
       1.0471E-10
       1.0965E-10
       1.1482E-10
       1.2023E-10
       1.2589E-10
       1.3183E-10
       1.3804E-10
       1.4454E-10
       1.5136E-10
       1.5849E-10
       1.6596E-10
       1.7378E-10
       1.8197E-10
       1.9055E-10
       1.9953E-10
       2.0893E-10
       2.1878E-10
       2.2909E-10
       2.3988E-10
       2.5119E-10
       2.6303E-10
       2.7542E-10
       2.8840E-10
       3.0200E-10
       3.1623E-10
       3.3113E-10
       3.4674E-10
       3.6308E-10
       3.8019E-10
       3.9811E-10
       4.1687E-10
       4.3652E-10
       4.5709E-10
       4.7863E-10
       5.0119E-10
       5.2481E-10
       5.4954E-10
       5.7544E-10
       6.0256E-10
       6.3096E-10
       6.6069E-10
       6.9183E-10
       7.2444E-10
       7.5858E-10
       7.9433E-10
       8.3176E-10
       8.7096E-10
       9.1201E-10
       9.5499E-10
       1.0000E-09
       1.0471E-09
       1.0965E-09
       1.1482E-09
       1.2023E-09
       1.2589E-09
       1.3183E-09
       1.3804E-09
       1.4454E-09
       1.5136E-09
       1.5849E-09
       1.6596E-09
       1.7378E-09
       1.8197E-09
       1.9055E-09
       1.9953E-09
       2.0893E-09
       2.1878E-09
       2.2909E-09
       2.3988E-09
       2.5119E-09
       2.6303E-09
       2.7542E-09
       2.8840E-09
       3.0200E-09
       3.1623E-09
       3.3113E-09
       3.4674E-09
       3.6308E-09
       3.8019E-09
       3.9811E-09
       4.1687E-09
       4.3652E-09
       4.5709E-09
       4.7863E-09
       5.0119E-09
       5.2481E-09
       5.4954E-09
       5.7544E-09
       6.0256E-09
       6.3096E-09
       6.6069E-09
       6.9183E-09
       7.2444E-09
       7.5858E-09
       7.9433E-09
       8.3176E-09
       8.7096E-09
       9.1201E-09
       9.5499E-09
       1.0000E-08
       1.0471E-08
       1.0965E-08
       1.1482E-08
       1.2023E-08
       1.2589E-08
       1.3183E-08
       1.3804E-08
       1.4454E-08
       1.5136E-08
       1.5849E-08
       1.6596E-08
       1.7378E-08
       1.8197E-08
       1.9055E-08
       1.9953E-08
       2.0893E-08
       2.1878E-08
       2.2909E-08
       2.3988E-08
       2.5119E-08
       2.6303E-08
       2.7542E-08
       2.8840E-08
       3.0200E-08
       3.1623E-08
       3.3113E-08
       3.4674E-08
       3.6308E-08
       3.8019E-08
       3.9811E-08
       4.1687E-08
       4.3652E-08
       4.5709E-08
       4.7863E-08
       5.0119E-08
       5.2481E-08
       5.4954E-08
       5.7544E-08
       6.0256E-08
       6.3096E-08
       6.6069E-08
       6.9183E-08
       7.2444E-08
       7.5858E-08
       7.9433E-08
       8.3176E-08
       8.7096E-08
       9.1201E-08
       9.5499E-08
       1.0000E-07
       1.0471E-07
       1.0965E-07
       1.1482E-07
       1.2023E-07
       1.2589E-07
       1.3183E-07
       1.3804E-07
       1.4454E-07
       1.5136E-07
       1.5849E-07
       1.6596E-07
       1.7378E-07
       1.8197E-07
       1.9055E-07
       1.9953E-07
       2.0893E-07
       2.1878E-07
       2.2909E-07
       2.3988E-07
       2.5119E-07
       2.6303E-07
       2.7542E-07
       2.8840E-07
       3.0200E-07
       3.1623E-07
       3.3113E-07
       3.4674E-07
       3.6308E-07
       3.8019E-07
       3.9811E-07
       4.1687E-07
       4.3652E-07
       4.5709E-07
       4.7863E-07
       5.0119E-07
       5.2481E-07
       5.4954E-07
       5.7544E-07
       6.0256E-07
       6.3096E-07
       6.6069E-07
       6.9183E-07
       7.2444E-07
       7.5858E-07
       7.9433E-07
       8.3176E-07
       8.7096E-07
       9.1201E-07
       9.5499E-07
       1.0000E-06
       1.0471E-06
       1.0965E-06
       1.1482E-06
       1.2023E-06
       1.2589E-06
       1.3183E-06
       1.3804E-06
       1.4454E-06
       1.5136E-06
       1.5849E-06
       1.6596E-06
       1.7378E-06
       1.8197E-06
       1.9055E-06
       1.9953E-06
       2.0893E-06
       2.1878E-06
       2.2909E-06
       2.3988E-06
       2.5119E-06
       2.6303E-06
       2.7542E-06
       2.8840E-06
       3.0200E-06
       3.1623E-06
       3.3113E-06
       3.4674E-06
       3.6308E-06
       3.8019E-06
       3.9811E-06
       4.1687E-06
       4.3652E-06
       4.5709E-06
       4.7863E-06
       5.0119E-06
       5.2481E-06
       5.4954E-06
       5.7544E-06
       6.0256E-06
       6.3096E-06
       6.6069E-06
       6.9183E-06
       7.2444E-06
       7.5858E-06
       7.9433E-06
       8.3176E-06
       8.7096E-06
       9.1201E-06
       9.5499E-06
       1.0000E-05
       1.0471E-05
       1.0965E-05
       1.1482E-05
       1.2023E-05
       1.2589E-05
       1.3183E-05
       1.3804E-05
       1.4454E-05
       1.5136E-05
       1.5849E-05
       1.6596E-05
       1.7378E-05
       1.8197E-05
       1.9055E-05
       1.9953E-05
       2.0893E-05
       2.1878E-05
       2.2909E-05
       2.3988E-05
       2.5119E-05
       2.6303E-05
       2.7542E-05
       2.8840E-05
       3.0200E-05
       3.1623E-05
       3.3113E-05
       3.4674E-05
       3.6308E-05
       3.8019E-05
       3.9811E-05
       4.1687E-05
       4.3652E-05
       4.5709E-05
       4.7863E-05
       5.0119E-05
       5.2481E-05
       5.4954E-05
       5.7544E-05
       6.0256E-05
       6.3096E-05
       6.6069E-05
       6.9183E-05
       7.2444E-05
       7.5858E-05
       7.9433E-05
       8.3176E-05
       8.7096E-05
       9.1201E-05
       9.5499E-05
       1.0000E-04
       1.0471E-04
       1.0965E-04
       1.1482E-04
       1.2023E-04
       1.2589E-04
       1.3183E-04
       1.3804E-04
       1.4454E-04
       1.5136E-04
       1.5849E-04
       1.6596E-04
       1.7378E-04
       1.8197E-04
       1.9055E-04
       1.9953E-04
       2.0893E-04
       2.1878E-04
       2.2909E-04
       2.3988E-04
       2.5119E-04
       2.6303E-04
       2.7542E-04
       2.8840E-04
       3.0200E-04
       3.1623E-04
       3.3113E-04
       3.4674E-04
       3.6308E-04
       3.8019E-04
       3.9811E-04
       4.1687E-04
       4.3652E-04
       4.5709E-04
       4.7863E-04
       5.0119E-04
       5.2481E-04
       5.4954E-04
       5.7544E-04
       6.0256E-04
       6.3096E-04
       6.6069E-04
       6.9183E-04
       7.2444E-04
       7.5858E-04
       7.9433E-04
       8.3176E-04
       8.7096E-04
       9.1201E-04
       9.5499E-04
       1.0000E-03
       1.0471E-03
       1.0965E-03
       1.1482E-03
       1.2023E-03
       1.2589E-03
       1.3183E-03
       1.3804E-03
       1.4454E-03
       1.5136E-03
       1.5849E-03
       1.6596E-03
       1.7378E-03
       1.8197E-03
       1.9055E-03
       1.9953E-03
       2.0893E-03
       2.1878E-03
       2.2909E-03
       2.3988E-03
       2.5119E-03
       2.6303E-03
       2.7542E-03
       2.8840E-03
       3.0200E-03
       3.1623E-03
       3.3113E-03
       3.4674E-03
       3.6308E-03
       3.8019E-03
       3.9811E-03
       4.1687E-03
       4.3652E-03
       4.5709E-03
       4.7863E-03
       5.0119E-03
       5.2481E-03
       5.4954E-03
       5.7544E-03
       6.0256E-03
       6.3096E-03
       6.6069E-03
       6.9183E-03
       7.2444E-03
       7.5858E-03
       7.9433E-03
       8.3176E-03
       8.7096E-03
       9.1201E-03
       9.5499E-03
       1.0000E-02
       1.0471E-02
       1.0965E-02
       1.1482E-02
       1.2023E-02
       1.2589E-02
       1.3183E-02
       1.3804E-02
       1.4454E-02
       1.5136E-02
       1.5849E-02
       1.6596E-02
       1.7378E-02
       1.8197E-02
       1.9055E-02
       1.9953E-02
       2.0893E-02
       2.1878E-02
       2.2909E-02
       2.3988E-02
       2.5119E-02
       2.6303E-02
       2.7542E-02
       2.8840E-02
       3.0200E-02
       3.1623E-02
       3.3113E-02
       3.4674E-02
       3.6308E-02
       3.8019E-02
       3.9811E-02
       4.1687E-02
       4.3652E-02
       4.5709E-02
       4.7863E-02
       5.0119E-02
       5.2481E-02
       5.4954E-02
       5.7544E-02
       6.0256E-02
       6.3096E-02
       6.6069E-02
       6.9183E-02
       7.2444E-02
       7.5858E-02
       7.9433E-02
       8.3176E-02
       8.7096E-02
       9.1201E-02
       9.5499E-02
       1.0000E-01
       1.0471E-01
       1.0965E-01
       1.1482E-01
       1.2023E-01
       1.2589E-01
       1.3183E-01
       1.3804E-01
       1.4454E-01
       1.5136E-01
       1.5849E-01
       1.6596E-01
       1.7378E-01
       1.8197E-01
       1.9055E-01
       1.9953E-01
       2.0893E-01
       2.1878E-01
       2.2909E-01
       2.3988E-01
       2.5119E-01
       2.6303E-01
       2.7542E-01
       2.8840E-01
       3.0200E-01
       3.1623E-01
       3.3113E-01
       3.4674E-01
       3.6308E-01
       3.8019E-01
       3.9811E-01
       4.1687E-01
       4.3652E-01
       4.5709E-01
       4.7863E-01
       5.0119E-01
       5.2481E-01
       5.4954E-01
       5.7544E-01
       6.0256E-01
       6.3096E-01
       6.6069E-01
       6.9183E-01
       7.2444E-01
       7.5858E-01
       7.9433E-01
       8.3176E-01
       8.7096E-01
       9.1201E-01
       9.5499E-01
       1.0000E+00
       1.0471E+00
       1.0965E+00
       1.1482E+00
       1.2023E+00
       1.2589E+00
       1.3183E+00
       1.3804E+00
       1.4454E+00
       1.5136E+00
       1.5849E+00
       1.6596E+00
       1.7378E+00
       1.8197E+00
       1.9055E+00
       1.9953E+00
       2.0893E+00
       2.1878E+00
       2.2909E+00
       2.3988E+00
       2.5119E+00
       2.6303E+00
       2.7542E+00
       2.8840E+00
       3.0200E+00
       3.1623E+00
       3.3113E+00
       3.4674E+00
       3.6308E+00
       3.8019E+00
       3.9811E+00
       4.1687E+00
       4.3652E+00
       4.5709E+00
       4.7863E+00
       5.0119E+00
       5.2481E+00
       5.4954E+00
       5.7544E+00
       6.0256E+00
       6.3096E+00
       6.6069E+00
       6.9183E+00
       7.2444E+00
       7.5858E+00
       7.9433E+00
       8.3176E+00
       8.7096E+00
       9.1201E+00
       9.5499E+00
       1.0000E+01
       1.0200E+01
       1.0400E+01
       1.0600E+01
       1.0800E+01
       1.1000E+01
       1.1200E+01
       1.1400E+01
       1.1600E+01
       1.1800E+01
       1.2000E+01
       1.2200E+01
       1.2400E+01
       1.2600E+01
       1.2800E+01
       1.3000E+01
       1.3200E+01
       1.3400E+01
       1.3600E+01
       1.3800E+01
       1.4000E+01
       1.4200E+01
       1.4400E+01
       1.4600E+01
       1.4800E+01
       1.5000E+01
       1.5200E+01
       1.5400E+01
       1.5600E+01
       1.5800E+01
       1.6000E+01
       1.6200E+01
       1.6400E+01
       1.6600E+01
       1.6800E+01
       1.7000E+01
       1.7200E+01
       1.7400E+01
       1.7600E+01
       1.7800E+01
       1.8000E+01
       1.8200E+01
       1.8400E+01
       1.8600E+01
       1.8800E+01
       1.9000E+01
       1.9200E+01
       1.9400E+01
       1.9600E+01
       1.9800E+01
       2.0000E+01
       2.1000E+01
       2.2000E+01
       2.3000E+01
       2.4000E+01
       2.5000E+01
       2.6000E+01
       2.7000E+01
       2.8000E+01
       2.9000E+01
       3.0000E+01
       3.2000E+01
       3.4000E+01
       3.6000E+01
       3.8000E+01
       4.0000E+01
       4.2000E+01
       4.4000E+01
       4.6000E+01
       4.8000E+01
       5.0000E+01
       5.2000E+01
       5.4000E+01
       5.6000E+01
       5.8000E+01
       6.0000E+01
       6.5000E+01
       7.0000E+01
       7.5000E+01
       8.0000E+01
       9.0000E+01
       1.0000E+02
       1.1000E+02
       1.2000E+02
       1.3000E+02
       1.4000E+02
       1.5000E+02
       1.6000E+02
       1.8000E+02
       2.0000E+02
       2.4000E+02
       2.8000E+02
       3.2000E+02
       3.6000E+02
       4.0000E+02
       4.4000E+02
       4.8000E+02
       5.2000E+02
       5.6000E+02
       6.0000E+02
       6.4000E+02
       6.8000E+02
       7.2000E+02
       7.6000E+02
       8.0000E+02
       8.4000E+02
       8.8000E+02
       9.2000E+02
       9.6000E+02
       1.0000E+03

